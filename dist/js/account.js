(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["account"],{2817:function(t,e,s){},"3afe":function(t,e,s){},"45fc":function(t,e,s){"use strict";var a=s("23e7"),i=s("b727").some,n=s("a640"),r=s("ae40"),o=n("some"),c=r("some");a({target:"Array",proto:!0,forced:!o||!c},{some:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},"498a":function(t,e,s){"use strict";var a=s("23e7"),i=s("58a8").trim,n=s("c8d2");a({target:"String",proto:!0,forced:n("trim")},{trim:function(){return i(this)}})},"4b62":function(t,e,s){},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,s){var a=s("1d80"),i=s("5899"),n="["+i+"]",r=RegExp("^"+n+n+"*"),o=RegExp(n+n+"*$"),c=function(t){return function(e){var s=String(a(e));return 1&t&&(s=s.replace(r,"")),2&t&&(s=s.replace(o,"")),s}};t.exports={start:c(1),end:c(2),trim:c(3)}},"64ec":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"addAccount pdtop"},[s("van-form",{directives:[{name:"show",rawName:"v-show",value:1==t.isAdd,expression:"isAdd == 1"}]},[s("my-header",{attrs:{lefticon:!0},on:{click:function(e){return t.$router.push("/home/index")}}},[t._v("添加账户")]),s("div",{staticStyle:{background:"#F9F9FB"}},[s("div",{staticClass:"shopMsg"},[t._v("账户信息")]),s("div",{staticClass:"boxxx"},[s("van-field",{attrs:{name:"userName",label:"账户","label-width":"145px",placeholder:"请输入账户",required:!0,rules:[{required:!0,message:"账户不能为空",trigger:"onBlur"}]},model:{value:t.userInfo.userName,callback:function(e){t.$set(t.userInfo,"userName",e)},expression:"userInfo.userName"}})],1),s("div",{staticClass:"boxxx"},[s("van-field",{attrs:{name:"password",type:"password",label:"密码","label-width":"145px",placeholder:"请输入密码",maxlength:6,rules:[{required:!0,message:"密码不能为空",trigger:"onBlur"}]},model:{value:t.userInfo.passWord,callback:function(e){t.$set(t.userInfo,"passWord",e)},expression:"userInfo.passWord"}})],1),s("div",{staticClass:"boxxx"},[s("span"),s("van-cell",{attrs:{title:"账号状态","is-link":""},on:{click:t.showState}},[t._v(t._s(t.storeState)+" ")]),s("van-popup",{attrs:{round:"",position:"bottom"},model:{value:t.isState,callback:function(e){t.isState=e},expression:"isState"}},[s("van-picker",{attrs:{title:"请选择账号状态","show-toolbar":"",columns:t.state},on:{confirm:t.pressState,cancel:t.onCancle}})],1)],1),s("div",{staticClass:"line"}),s("div",{staticClass:"boxxx"},[s("span"),s("van-cell",{attrs:{title:"关联门店",value:t.link,"is-link":""},on:{click:function(e){t.isAdd=2}}},[t._v(t._s(t.link))])],1),t._l(t.message,(function(e){return s("div",{key:e.id},[s("div",{staticClass:"content_msg"},[s("div",{staticClass:"image"},[s("img",{attrs:{src:e.storePhotoUrlList&&e.storePhotoUrlList.length>0?e.storePhotoUrlList[0]:t.defaultImg,alt:""}}),s("img",{directives:[{name:"show",rawName:"v-show",value:null==e.storePhotoUrlList,expression:"item.storePhotoUrlList == null"}],attrs:{src:"",alt:""}})]),s("div",{staticClass:"text"},[s("ul",[s("li",{attrs:{id:"vendorName"}},[t._v(t._s(e.storeName))]),s("li",[t._v("地点："+t._s(e.address))]),s("li",[t._v("入驻时间："+t._s(t._f("timeFilter")(e.ctime,"YYYY.MM.DD")))])])])])])})),s("div",{staticClass:"next",attrs:{id:"submit"}},[s("input",{staticClass:"button",class:{greenlight:3===t.greenLight},attrs:{type:"submit",value:"提交"},on:{click:t.onSubmit}})])],2)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:2==t.isAdd,expression:"isAdd == 2"}],staticStyle:{height:"100%",backgroundColor:"#f9f9fb"}},[s("linkshop",{attrs:{back:t.toggle},on:{toAddShop1:t.acceptLink}})],1)],1)},i=[],n=(s("4160"),s("b64b"),s("9911"),s("159b"),s("96cf"),s("1da1")),r=s("e729"),o=s("b775"),c=s("c57c"),l={name:"addaccount",components:{linkshop:r["a"]},data:function(){return{defaultImg:s("c87a"),isState:!1,state:["启用","禁用"],isAdd:1,link:"请选择关联门店",message:[],userInfo:{accountStatus:1,marketerId:Object(c["a"])("marketer_id"),userName:"",passWord:"",relevanceStoreList:[]},greenLight:""}},mounted:function(){},methods:{showState:function(){this.isState=!0},pressState:function(t,e){this.isState=!1,this.userInfo.accountStatus="启用"===t?1:0},onCancle:function(){this.isState=!1},toggle:function(){this.isAdd=1},acceptLink:function(t){this.isAdd=1,this.userInfo.relevanceStoreList=JSON.parse(JSON.stringify(t)),this.message=this.userInfo.relevanceStoreList;var e="";e="已选择".concat(this.userInfo.relevanceStoreList.length,"家门店"),this.link=""==e?"请选择关联门店":e},onSubmit:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(3===t.greenLight){e.next=2;break}return e.abrupt("return",t.$toast("信息未完善！"));case 2:return e.prev=2,t.userInfo.relevanceStoreList.forEach((function(t){t.read&&(t.isCheck=1),t.edit&&(t.isCheck=0),delete t.edit,delete t.read})),e.next=6,Object(o["b"])("/api/store-manager-info/storeManagerInfo",t.userInfo);case 6:s=e.sent,200==s.code&&(t.$toast("添加成功"),Object.assign(t.$data,t.$options.data()),t.$router.push("/")),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))()}},computed:{storeState:function(){return this.userInfo.accountStatus?"启用":"禁用"}},watch:{userInfo:{handler:function(t){var e=this;this.greenLight="",Object.keys(t).forEach((function(s){"passWord"!==s&&"marketerId"!==s&&("relevanceStoreList"===s&&t[s].length>0&&e.greenLight++,"relevanceStoreList"!==s&&""!==t[s]&&e.greenLight++)}))},deep:!0}}},u=l,d=(s("f915"),s("2877")),h=Object(d["a"])(u,a,i,!1,null,"28f79aad",null);e["default"]=h.exports},"706f":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAABgklEQVQoU51Sv0sjQRT+3uxLVq5MlSD4JxzWWh1yx1WChVHQ4pQL2W2ipDw82ObUOiCZDSiiYpFGO0ELq4O7Vv8GXVKlkHAmNzNPJrhiJzjNwON9fL8e4fm1Wq0wDMNYRBYAhAAIwCMRnQ2Hw3aj0Rj6VT9Eu92eVEp1AZwMBoPDZrP5z8/TNP0gIt8ArIrIYhzHd5QkyUS5XL4SkbhQKNxba7dE5PMz8SUz/3LOTYnIXpZlc5Sm6aaIPDDzmTHmDxFdKKX2PcBa+x3AF2aeMcYsExGT1vp6NBp9LRaLu0Sk6vX6Ru7L/1rrFoD/RPRTRC7GgCiKPmmtb4MgWKnVajevAZ1OZ9o5dxRF0Uet9d/3AbykMAx3AARvSspNG2POmfk3gEul1IGX5Zxb96aNMbPMvDQ2/TpWa23GzD8A5LFeGWO2gyCo+Fp6vd7cS3FEdArgqFQqHVer1ZFn6Ha7xX6/vyYivrjlcXF5Ip6pUqlEIjKfXwAAIaLzLMs6SZI8+t0nId7Xw1bbH/UAAAAASUVORK5CYII="},"71d8":function(t,e,s){"use strict";var a=s("2817"),i=s.n(a);i.a},7701:function(t,e,s){t.exports=s.p+"img/huluwa.jpg"},"857a":function(t,e,s){var a=s("1d80"),i=/"/g;t.exports=function(t,e,s,n){var r=String(a(t)),o="<"+e;return""!==s&&(o+=" "+s+'="'+String(n).replace(i,"&quot;")+'"'),o+">"+r+"</"+e+">"}},9911:function(t,e,s){"use strict";var a=s("23e7"),i=s("857a"),n=s("af03");a({target:"String",proto:!0,forced:n("link")},{link:function(t){return i(this,"a","href",t)}})},a3fc:function(t,e,s){"use strict";var a=s("aaeb"),i=s.n(a);i.a},aa58:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"account-detail hide-scroll pdtop"},[s("my-header",{attrs:{lefticon:!0},on:{click:function(e){return t.$router.push("/accountManage")}}},[t._v("账户详情")]),s("div",{staticClass:"body"},[s("div",{staticClass:"text"},[t._v("账户信息")]),s("div",{staticClass:"main"},[s("div",{staticClass:"bars"},[s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("账户")]),s("div",{staticClass:"content"},[t._v(t._s(t.list.userName))])]),s("div",{staticClass:"item"},[s("van-field",{attrs:{type:"password",maxlength:6,label:"密码",readonly:""},model:{value:t.list.passWord,callback:function(e){t.$set(t.list,"passWord",e)},expression:"list.passWord"}})],1),s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("账户状态")]),s("div",{staticClass:"content"},[t._v(" "+t._s(t.list.accountStatus?"启用":"禁用")+" ")])]),s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("关联门店")]),s("div",{staticClass:"content"},[t._v(" 已关联"+t._s(t.list.relevanceStoreList.length)+"家门店 ")])])]),s("div",{staticClass:"list"},t._l(t.list.relevanceStoreList,(function(e){return s("div",{key:e.id,staticClass:"item"},[s("img",{attrs:{src:null!==e.storeHeadImgUrlList&&e.storeHeadImgUrlList.length>0?e.storeHeadImgUrlList[0]:t.defaultImg,alt:""}}),s("div",{staticClass:"content"},[s("div",{staticClass:"name"},[t._v(t._s(e.storeName))]),s("div",[t._v("地点："+t._s(e.address))]),s("div",[t._v("签约认证：--")])])])})),0)])])],1)},i=[],n=(s("96cf"),s("1da1")),r=s("b775"),o={name:"accountdetail",activated:function(){this.$route.query.id&&(this.id=this.$route.query.id,this.getList(this.id))},data:function(){return{defaultImg:s("7701"),list:{}}},methods:{getList:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,Object(r["a"])("/api/store-manager-info/".concat(t,"/storeManagerInfoDetail"));case 3:a=s.sent,console.log(a,"res"),"200"===a.code&&(e.list=a.data),s.next=11;break;case 8:s.prev=8,s.t0=s["catch"](0),console.log(s.t0);case 11:case"end":return s.stop()}}),s,null,[[0,8]])})))()}}},c=o,l=(s("b1d0"),s("2877")),u=Object(l["a"])(c,a,i,!1,null,"08994ffb",null);e["default"]=u.exports},aaeb:function(t,e,s){},af03:function(t,e,s){var a=s("d039");t.exports=function(t){return a((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},b0a8:function(t,e,s){"use strict";var a=s("e334"),i=s.n(a);i.a},b1d0:function(t,e,s){"use strict";var a=s("3afe"),i=s.n(a);i.a},c87a:function(t,e,s){t.exports=s.p+"img/maliao.jpg"},c8d2:function(t,e,s){var a=s("d039"),i=s("5899"),n="​᠎";t.exports=function(t){return a((function(){return!!i[t]()||n[t]()!=n||i[t].name!==t}))}},da70:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"account-manage pdtop"},[s("my-header",{attrs:{lefticon:!0},on:{click:function(e){return t.$router.push("/home/index")}}},[t._v("账户管理")]),s("div",{staticClass:"content"},[s("div",{staticClass:"content_search"},[s("van-search",{attrs:{placeholder:"请输入账号","show-action":"",clearable:!1,"left-icon":""},on:{search:t.search,cancel:function(e){t.searchMsg=""}},model:{value:t.searchMsg,callback:function(e){t.searchMsg=e},expression:"searchMsg"}},[s("svg",{staticClass:"icon",attrs:{slot:"right-icon","aria-hidden":"true"},on:{click:t.search},slot:"right-icon"},[s("use",{attrs:{"xlink:href":"#icon-fangdajing"}})])])],1),s("div",{staticClass:"items hide-scroll",on:{scroll:t.handleScoll}},[s("van-pull-refresh",{attrs:{"success-text":"刷新成功"},on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},t._l(t.list,(function(e,a){return s("div",{key:e.id,staticClass:"item"},[s("ul",[s("li",{attrs:{id:"vendorName"}},[s("span",[t._v(" 账号：")]),t._v(" "+t._s(e.userName)+" ")]),s("li",[s("span",[t._v(" 关联门店：")]),t._v(" "+t._s(e.stores)+" ")]),s("li",[s("span",[t._v(" 账号状态：")]),t._v(" "+t._s(1==e.accountStatus?"启用":"禁用")+" ")]),s("li",[s("span",[t._v(" 创建时间：")]),t._v(" "+t._s(t._f("timeFilter")(e.ctime,"YYYY.MM.DD"))+" ")])]),s("div",{staticClass:"button"},[s("div",{staticClass:"edit",on:{click:function(s){return t.$router.push({path:"/editaccount",query:{id:e.id}})}}},[t._v(" 编辑 ")]),s("div",{staticClass:"read-only",on:{click:function(s){return t.$router.push({path:"/accountdetail",query:{id:e.id}})}}},[t._v(" 查看 ")])])])})),0),s("div",{directives:[{name:"show",rawName:"v-show",value:t.finished,expression:"finished"}],staticClass:"no-more"},[t._v(t._s(t.finishedTxt))])],1)])],1)},i=[],n=(s("99af"),s("4160"),s("d81d"),s("498a"),s("159b"),s("2909")),r=(s("96cf"),s("1da1")),o=s("b775"),c=(s("c57c"),{name:"accountmanage",data:function(){return{isLoading:!1,loading:!0,finished:!1,finishedTxt:"没有更多了",searchMsg:"",list:[],params:{userName:this.searchMsg,currentPage:1,pageSize:10,sortType:""}}},mounted:function(){this.getList()},methods:{search:function(){if(!this.searchMsg.trim())return this.searchMsg="",this.$toast("关键字不能为空");this.list=[],this.getList()},getList:function(t,e){var s=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(o["a"])("/api/store-manager-info/storeManagerInfoList",s.params);case 3:a=t.sent,console.log(a),"200"==a.code&&(a.data.data.length<10&&(s.finished=!0,0===a.data.data.length&&(s.finishedTxt="暂无数据")),a.data.data.map((function(t){var e="";t.relevanceStoreNameList.length>0?t.relevanceStoreNameList.forEach((function(t){e+="".concat(t,"、")})):e="暂无关联门店",s.$set(t,"stores",e)})),s.list=[].concat(Object(n["a"])(s.list),Object(n["a"])(a.data.data)),e&&e()),t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})))()},onRefresh:function(){var t=this;this.params.currentPage=1,this.list=[],this.finished=!1,this.getList(this.params,(function(){return t.isLoading=!1}))},handleScoll:function(t){var e=this,s=t.target.scrollHeight-t.target.scrollTop-t.target.clientHeight;!this.finished&&s<200&&this.loading&&(console.log("aaaaaaaa"),this.loading=!1,this.params.currentPage++,this.getList(this.params,(function(){return e.loading=!0})))}}}),l=c,u=(s("a3fc"),s("2877")),d=Object(u["a"])(l,a,i,!1,null,"133bba0e",null);e["default"]=d.exports},e334:function(t,e,s){},e729:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"linkContent pdtop"},[s("my-header",{attrs:{lefticon:!0},on:{click:t.back}},[t._v("关联门店")]),s("div",{staticClass:"content_search"},[s("van-search",{attrs:{placeholder:"请输入门店名称","show-action":"",clearable:!1,"left-icon":""},on:{search:t.search,cancel:function(e){t.searchMsg=""}},model:{value:t.params.storeName,callback:function(e){t.$set(t.params,"storeName",e)},expression:"params.storeName"}},[s("svg",{staticClass:"icon",attrs:{slot:"right-icon","aria-hidden":"true"},on:{click:t.search},slot:"right-icon"},[s("use",{attrs:{"xlink:href":"#icon-fangdajing"}})])])],1),s("div",{staticClass:"msgBox"},t._l(t.list,(function(e){return s("div",{key:e.id,staticClass:"item"},[s("div",{staticClass:"content_msg"},[s("img",{attrs:{src:null!==e.storeHeadImgUrlList&&e.storeHeadImgUrlList.length>0?e.storeHeadImgUrlList[0]:t.defaultImg,alt:""}}),s("div",{staticClass:"text"},[s("ul",[s("li",{attrs:{id:"vendorName"}},[t._v(t._s(e.storeName))]),s("li",[t._v("地址："+t._s(e.address))]),s("li",[t._v("信息完善：未完善")])])])]),s("div",{staticClass:"selete"},[s("van-checkbox",{on:{click:function(s){return t.changeEdit(e)}},scopedSlots:t._u([{key:"icon",fn:function(e){return[s("img",{staticClass:"img-icon",attrs:{src:e.checked?t.activeIcon:t.inactiveIcon}})]}}],null,!0),model:{value:e.edit,callback:function(s){t.$set(e,"edit",s)},expression:"item.edit"}},[t._v("编辑并查看 ")]),s("van-checkbox",{on:{click:function(s){return t.changeRead(e)}},scopedSlots:t._u([{key:"icon",fn:function(e){return[s("img",{staticClass:"img-icon",attrs:{src:e.checked?t.activeIcon:t.inactiveIcon}})]}}],null,!0),model:{value:e.read,callback:function(s){t.$set(e,"read",s)},expression:"item.read"}},[t._v("仅查看 ")])],1)])})),0),s("div",{staticClass:"submit"},[s("input",{attrs:{type:"submit",value:"确定"},on:{click:t.submit}})])],1)},i=[],n=(s("4de4"),s("7db0"),s("4160"),s("d81d"),s("45fc"),s("498a"),s("159b"),s("96cf"),s("1da1")),r=s("b775"),o=(s("c57c"),{name:"linkshop",props:["back","outside","username"],data:function(){return{defaultImg:s("7701"),activeIcon:s("f7a4"),inactiveIcon:s("706f"),params:{currentPage:1,pageSize:10,storeName:""},list:[],shopList:[]}},mounted:function(){this.getList()},methods:{search:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.searchMsg.trim()){e.next=4;break}return t.searchMsg="",t.$toast("门店名称不能为空！"),e.abrupt("return");case 4:t.getList(t.params);case 5:case"end":return e.stop()}}),e)})))()},getList:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,Object(r["a"])("/api/store-info/storeInfoListExtension",t);case 3:if(a=s.sent,"200"!==a.code){s.next=11;break}if(0!==a.data.data.length){s.next=8;break}return e.$toast("暂无数据,请重新搜索！"),s.abrupt("return");case 8:e.outside&&e.outside.forEach((function(t){a.data.data.some((function(e,s){if(t.id===e.id)return a.data.data[s]=t,!0}))})),e.list=a.data.data.map((function(t){var s=e.shopList.find((function(e){if(e.id===t.id)return e}));return s?t=s:0===t.isCheck?e.$set(t,"edit",!0):1===t.isCheck?e.$set(t,"read",!0):(e.$set(t,"edit",""),e.$set(t,"read","")),t})),0===e.shopList.length&&e.list.forEach((function(t){0!==t.isCheck&&1!==t.isCheck||e.shopList.push(t)}));case 11:s.next=16;break;case 13:s.prev=13,s.t0=s["catch"](0),console.log(s.t0);case 16:case"end":return s.stop()}}),s,null,[[0,13]])})))()},changeEdit:function(t){var e=this;if(0===this.shopList.length)this.shopList.push(t);else{var s=this.shopList.find((function(e){return e.id===t.id}));s?this.shopList.forEach((function(s){s.id===t.id&&(console.log(s.edit,t.edit),s.edit&&(s.read=!1),s.edit||s.read||(e.shopList=e.shopList.filter((function(e){return e.id!==t.id}))))})):this.shopList.push(t)}},changeRead:function(t){var e=this;if(0===this.shopList.length)this.shopList.push(t);else{var s=this.shopList.find((function(e){return e.id===t.id}));s||this.shopList.push(t),s&&this.shopList.forEach((function(s){s.id===t.id&&(s.read&&(s.edit=!1),s.edit||s.read||(e.shopList=e.shopList.filter((function(e){return e.id!==t.id}))))}))}},submit:function(){var t=this;0!==this.shopList.length?this.$dialog.confirm({title:"温馨提示",message:"您已选中".concat(this.shopList.length,"家门店，是否确认")}).then((function(){t.$emit("toAddShop1",t.shopList)})).catch((function(t){console.log(t)})):this.$toast("请选择关联门店")}}}),c=o,l=(s("71d8"),s("2877")),u=Object(l["a"])(c,a,i,!1,null,"b99cb56e",null);e["a"]=u.exports},f7a4:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAABmklEQVQoU42Ryy5DURSG19rnHESVxhlJNVETYeoFXKo0EbeEGIh7XCYinqDPIBEqKXVPTCqI0gpm4gUkIgipmDi0tC49lyX7pKUSA2uys/+sL+tf/0JIl8cznauqlnFk0A4AuQCAAPBBBgQlKTkbCk188lYuQl3dkl0Q9U0yYDWZjAVOT6feuV5d7cu3yUK/ANijaWLn0VHfPdbUePMkyRFBpHFBeLtM6QV9DKCZAwbAbo6QWNI0ayUgzaipu3p0ufyTxOD19jq56iy3bCOiO2PTfIn2o1Fra0npyzAAE7GhceH45irR5HTm9yNjc7+a0x8DaOT5UVsrlsWQCUQOBmtdbn+QIbb9BRBRMBIe6mhw+8/+BRhEW4fhofZvgFsqK7P0MgHn/5oARMOKom2YljJLFxdZA7H46w4ierIhImPPVlTY8hR/GTWXzo5VUfQLmywNZMcaU9RFWRYqCJjPjPXncNq6AbD8ELWunJ93pbheVbWZY7cnBoBRj66K3ebhMuP5JFF0jAGDFkQ0deIFuKWn7uZPTrwfXPsCRDS3+1oIz34AAAAASUVORK5CYII="},f915:function(t,e,s){"use strict";var a=s("4b62"),i=s.n(a);i.a},fd06:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"addAccount pdtop"},[s("van-form",{directives:[{name:"show",rawName:"v-show",value:1==t.isAdd,expression:"isAdd == 1"}]},[s("my-header",{attrs:{lefticon:!0},on:{click:function(e){return t.$router.push("/accountManage")}}},[t._v("编辑账户")]),s("div",{staticStyle:{background:"#F9F9FB"}},[s("div",{staticClass:"shopMsg"},[t._v("账户信息")]),s("div",{staticClass:"boxxx"},[s("van-field",{attrs:{name:"userName",label:"账户","label-width":"145px",placeholder:"请输入账户",required:!0,rules:[{required:!0,message:"账户不能为空",trigger:"onBlur"}]},model:{value:t.userInfo.userName,callback:function(e){t.$set(t.userInfo,"userName",e)},expression:"userInfo.userName"}})],1),s("div",{staticClass:"boxxx"},[s("van-field",{attrs:{name:"password",type:"password",label:"密码",maxlength:6,"label-width":"145px",placeholder:"请输入密码",rules:[{required:!0,message:"密码不能为空",trigger:"onBlur"}]},model:{value:t.userInfo.passWord,callback:function(e){t.$set(t.userInfo,"passWord",e)},expression:"userInfo.passWord"}})],1),s("div",{staticClass:"boxxx"},[s("span"),s("van-cell",{attrs:{title:"账号状态","is-link":""},on:{click:function(e){t.isState=!0}}},[t._v(t._s(t.userInfo.accountStatus?"启用":"禁用")+" ")]),s("van-popup",{attrs:{round:"",position:"bottom"},model:{value:t.isState,callback:function(e){t.isState=e},expression:"isState"}},[s("van-picker",{attrs:{title:"请选择账号状态","show-toolbar":"",columns:t.state},on:{confirm:t.pressState,cancel:function(e){t.isState=!1}}})],1)],1),s("div",{staticClass:"line"}),s("div",{staticClass:"boxxx",on:{click:function(e){t.isAdd=2}}},[s("van-field",{attrs:{label:"关联门店",placeholder:"请选择关联门店","label-width":"145px",required:!0,readonly:!0},model:{value:t.storeNums,callback:function(e){t.storeNums=e},expression:"storeNums"}},[s("svg",{staticClass:"icon",attrs:{slot:"right-icon","aria-hidden":"true"},slot:"right-icon"},[s("use",{attrs:{"xlink:href":"#icon-ic_arrowr-copy"}})])])],1),t._l(t.userInfo.relevanceStoreList,(function(e){return s("div",{key:e.id},[s("div",{staticClass:"content_msg"},[s("div",{staticClass:"image"},[s("img",{attrs:{src:e.storePhotoUrlList&&e.storePhotoUrlList.length>0?e.storePhotoUrlList[0]:t.defaultImg,alt:""}}),s("img",{directives:[{name:"show",rawName:"v-show",value:null==e.storePhotoUrlList,expression:"item.storePhotoUrlList == null"}],attrs:{src:"",alt:""}})]),s("div",{staticClass:"text"},[s("ul",[s("li",{attrs:{id:"vendorName"}},[t._v(t._s(e.storeName))]),s("li",[t._v("地点："+t._s(e.address))]),s("li",[t._v("入驻时间："+t._s(t._f("timeFilter")(e.ctime,"YYYY.MM.DD")))])])])])])})),s("div",{staticClass:"next",attrs:{id:"submit"}},[s("input",{staticClass:"button",attrs:{type:"submit",value:"保存"},on:{click:t.onSubmit}})])],2)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:2==t.isAdd,expression:"isAdd == 2"}],staticStyle:{height:"100%",backgroundColor:"#f9f9fb"}},[s("linkshop",{attrs:{back:t.toggle,outside:t.userInfo.relevanceStoreList},on:{toAddShop1:t.acceptLink}})],1)],1)},i=[],n=(s("4160"),s("159b"),s("96cf"),s("1da1")),r=s("e729"),o=s("b775"),c=s("c57c"),l={name:"addaccount",components:{linkshop:r["a"]},activated:function(){this.$route.query.id&&(this.userInfo.id=this.$route.query.id,this.getInfo(this.userInfo.id))},data:function(){return{defaultImg:s("c87a"),isState:!1,state:["启用","禁用"],isAdd:1,link:"请选择关联门店",userInfo:{accountStatus:1,marketerId:Object(c["a"])("marketer_id"),userName:"",passWord:"",relevanceStoreList:[],id:""}}},methods:{getInfo:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,Object(o["a"])("/api/store-manager-info/".concat(t,"/storeManagerInfoDetail"));case 3:a=s.sent,console.log(a),"200"===a.code&&(e.userInfo.accountStatus=a.data.accountStatus,e.userInfo.userName=a.data.userName,e.userInfo.passWord=a.data.passWord,e.userInfo.relevanceStoreList=a.data.relevanceStoreList),s.next=11;break;case 8:s.prev=8,s.t0=s["catch"](0),console.log(s.t0);case 11:case"end":return s.stop()}}),s,null,[[0,8]])})))()},pressState:function(t,e){this.isState=!1,this.userInfo.accountStatus="启用"===t?1:0},toggle:function(){this.isAdd=1},acceptLink:function(t){this.isAdd=1,this.userInfo.relevanceStoreList=JSON.parse(JSON.stringify(t))},onSubmit:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.userInfo.relevanceStoreList.forEach((function(t){t.read&&(t.isCheck=1),t.edit&&(t.isCheck=0),delete t.edit,delete t.read})),e.next=4,Object(o["c"])("/api/store-manager-info/storeManagerInfo",t.userInfo);case 4:s=e.sent,console.log(s,"res"),200==s.code&&(t.$toast("修改成功"),Object.assign(t.$data,t.$options.data()),t.$router.push("/")),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()}},computed:{storeNums:function(){if(this.userInfo.relevanceStoreList.length>0)return"已关联".concat(this.userInfo.relevanceStoreList.length,"家门店")}}},u=l,d=(s("b0a8"),s("2877")),h=Object(d["a"])(u,a,i,!1,null,"71d81e9c",null);e["default"]=h.exports}}]);